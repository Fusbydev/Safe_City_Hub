{% extends 'base.html' %}

{% block content %}
<div class="container-fluid mt-5 pt-5 text-start">
  <p class="fs-4 fw-bold">
      {{user_obj.username}}'s Profile
  </p>
</div>
  <div class="container mt-5 p-4 rounded profile-section">
    <div class="row">
      <div class="col-md-3">
        <img src="{{ avatar_url }}" alt="" class="profile img-fluid">
      </div>
      <div class="col-md-6 text-start">
        <strong>{{user_obj.username}}</strong>
        <p>Email: {{user_obj.email}}</p>
        <p>phone: {{user_obj.phone_number}}</p>
        <p>Member Since : {{user_obj.date_joined}}</p>
      </div>
      <div class="col-md-3">
        <a href="#" class="btn btn-outline-primary">Edit Profile
          <i class="fa-solid fa-pen-to-square"></i>
        </a>
        {% if user.is_authenticated %}

          <a class="btn btn-danger" href="{% url 'logout' %}">Log out <i
              class="fa-solid fa-right-from-bracket"></i></a>
        {% else %}
          <a class="btn btn-primary" href="{% url 'login' %}">Log in <i
              class="fa-solid fa-right-to-bracket"></i></a>
        {% endif %}
      </div>
    </div>
    <div class="row mt-2">
        <div class="col-4">
          <h1>{{ total_reports }}</h1>
          Total Reports:
        </div>
        <div class="col-4">
          <h1>dynamic</h1>
          total Resolved Reports:
        </div>
        <div class="col-4">
          <h1>dynamic</h1>
          In Progress: 
        </div>
    </div>
  </div>

  <div class="container mt-5 p-4 rounded profile-section">
   <div class="row">
    <div class="col-6">
      <p class="lead fw-bold text-start">My Reports</p>
    </div>
    <div class="col-6 text-end">
      <div class="d-flex justify-content-end gap-2 flex-wrap">
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownType" data-bs-toggle="dropdown" aria-expanded="false">
                Filter by type
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownType">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else</a>
            </div>
        </div>
    
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownLocation" data-bs-toggle="dropdown" aria-expanded="false">
                Filter by location
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownLocation">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else</a>
            </div>
        </div>
    
        <div class="dropdown">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownSort" data-bs-toggle="dropdown" aria-expanded="false">
                Sort by place
            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownSort">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <a class="dropdown-item" href="#">Something else</a>
            </div>
        </div>
      </div>
    </div>
    
    
   </div>
   <div class="row">
    <div class="container mt-4 text-start">
      {% if page_obj.object_list %}
        <div class="list-group">
          {% for report in page_obj %}
            <div class="list-group-item">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h5 class="mb-1">{{ report.incident_type }}</h5>
                  <small>Location: {{ report.longitude }} | Status: {{ report.urgency_level }}</small><br>
                  <small class="text-muted">Submitted: {{ report.submitted_at|date:"F j, Y, g:i a" }}</small>
                </div>
                <div class="ms-auto">
                  <a href="{% url 'edit_report' report.id %}" class="btn btn-sm btn-primary me-2"><i class="fa-solid fa-pen-to-square"></i> Edit</a>
                  <a href="{% url 'delete_report' report.id %}" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure you want to delete this report?');"><i class="fa-solid fa-trash"></i> Delete</a>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>No reports found.</p>
      {% endif %}
    </div>
  </div>
  

  </div>
{% endblock %}
